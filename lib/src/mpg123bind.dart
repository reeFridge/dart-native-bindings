library mpg123bind;

import 'dart-ext:/home/fridge/code/Dart/mpg123bind/lib/src/native/mpg123native';

const MPG123_DONE = -12;
const MPG123_NEW_FORMAT = -11;
const MPG123_NEED_MORE = -10;
const MPG123_ERR = -1;

enum mpg123_error {
	MPG123_OK,
	MPG123_BAD_OUTFORMAT,
	MPG123_BAD_CHANNEL,
	MPG123_BAD_RATE,
	MPG123_ERR_16TO8TABLE,
	MPG123_BAD_PARAM,
	MPG123_BAD_BUFFER,
	MPG123_OUT_OF_MEM,
	MPG123_NOT_INITIALIZED,
	MPG123_BAD_DECODER,
	MPG123_BAD_HANDLE,
	MPG123_NO_BUFFERS,
	MPG123_BAD_RVA,
	MPG123_NO_GAPLESS,
	MPG123_NO_SPACE,
	MPG123_BAD_TYPES,
	MPG123_BAD_BAND,
	MPG123_ERR_NULL,
	MPG123_ERR_READER,
	MPG123_NO_SEEK_FROM_END,
	MPG123_BAD_WHENCE,
	MPG123_NO_TIMEOUT,
	MPG123_BAD_FILE,
	MPG123_NO_SEEK,
	MPG123_NO_READER,
	MPG123_BAD_PARS,
	MPG123_BAD_INDEX_PAR,
	MPG123_OUT_OF_SYNC,
	MPG123_RESYNC_FAIL,
	MPG123_NO_8BIT,
	MPG123_BAD_ALIGN,
	MPG123_NULL_BUFFER,
	MPG123_NO_RELSEEK,
	MPG123_NULL_POINTER,
	MPG123_BAD_KEY,
	MPG123_NO_INDEX,
	MPG123_INDEX_FAIL,
	MPG123_BAD_DECODER_SETUP,
	MPG123_MISSING_FEATURE,
	MPG123_BAD_VALUE,
	MPG123_LSEEK_FAILED,
	MPG123_BAD_CUSTOM_IO,
	MPG123_LFS_OVERFLOW,
	MPG123_INT_OVERFLOW,
	MPG123_DONE,
	MPG123_NEW_FORMAT,
	MPG123_NEED_MORE,
	MPG123_ERR
}

int _mpg123_init() native 'init';
bool mpg123_create() native 'create';
void mpg123_cleanup() native 'cleanup';

mpg123_error mpg123_init() {
	int resultCode = _mpg123_init();
	switch (resultCode) {
		case MPG123_DONE: return mpg123_error.MPG123_DONE;
		case MPG123_NEW_FORMAT: return mpg123_error.MPG123_NEW_FORMAT;
		case MPG123_NEED_MORE: return mpg123_error.MPG123_NEED_MORE;
		case MPG123_ERR: return mpg123_error.MPG123_ERR;
		default:
			return mpg123_error.values[resultCode];
	}
}

